!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("jexpeval",[],t):"object"==typeof exports?exports.jexpeval=t():e.jexpeval=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{jexpeval:()=>u});var n,r=["Compound","Identifier","MemberExpression","Literal","ThisExpression","CallExpression","UnaryExpression","BinaryExpression","ConditionalExpression","ArrayExpression"],o=function(){function e(t,n,r){void 0===n&&(n=e.genericCallerSolver),void 0===r&&(r=e.genericValuesSolver),this._parser=t,this._caller=n,this._values=r}return e.genericCallerSolver=function(e,t){return new Promise((function(t,n){t("`".concat(e,"`"))}))},e.genericValuesSolver=function(e){return new Promise((function(t,n){t("`".concat(e,"`"))}))},e.genericCallerUnknowParser=function(e,t){return new Promise((function(n,r){if("function"!=typeof e)throw"JSEP is not defined";var o=e(t);if("object"!=typeof o)throw"Value returned in JSEP is not array";if(!o.hasOwnProperty("type"))throw"Value returned in JSEP dont contain 'type' item.";n(o)}))},e.getType=function(e){return"object"==typeof e&&e.hasOwnProperty("type")&&r.indexOf(e.type)?e.type:null},e}(),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.eval=function(t){var n=this;if("string"!=typeof t)throw"Eval input in jexpeval isnot string";return new Promise((function(r,o){n._parser(t).then((function(t){var i=n.constructor.getType(t);if(null===i)throw"Invalid type in lex eval.";new e.g[i](n._parser,n._caller,n._values).eval(t).then((function(e){return r(e)})).catch((function(e){return o(e)}))}))}))},n}(o);return t})()));